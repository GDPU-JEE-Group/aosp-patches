From 99db0d39ee76955de84414d06312ff0f3b00e29d Mon Sep 17 00:00:00 2001
From: chaixiang <973731820@qq.com>
Date: Fri, 7 Mar 2025 08:00:23 +0000
Subject: [PATCH 3/4] add Disable the settings of the lock screen.

---
 .../base/core/java/android/os/PowerManager.java       | 11 ++++++-----
 packages/apps/Settings/res/xml/display_settings.xml   |  4 ++--
 2 files changed, 8 insertions(+), 7 deletions(-)

diff --git a/frameworks/base/core/java/android/os/PowerManager.java b/frameworks/base/core/java/android/os/PowerManager.java
index 4dae7c7c96..9a72b025b9 100644
--- a/frameworks/base/core/java/android/os/PowerManager.java
+++ b/frameworks/base/core/java/android/os/PowerManager.java
@@ -1386,11 +1386,12 @@ public final class PowerManager {
      */
     @UnsupportedAppUsage
     public void goToSleep(long time, int reason, int flags) {
-        try {
-            mService.goToSleep(time, reason, flags);
-        } catch (RemoteException e) {
-            throw e.rethrowFromSystemServer();
-        }
+        return;
+        // try {
+        //     mService.goToSleep(time, reason, flags);
+        // } catch (RemoteException e) {
+        //     throw e.rethrowFromSystemServer();
+        // }
     }
 
     /**
diff --git a/packages/apps/Settings/res/xml/display_settings.xml b/packages/apps/Settings/res/xml/display_settings.xml
index c48dcbcaef..b74b9af1ed 100644
--- a/packages/apps/Settings/res/xml/display_settings.xml
+++ b/packages/apps/Settings/res/xml/display_settings.xml
@@ -48,12 +48,12 @@
             settings:keywords="@string/keywords_ambient_display_screen"
             settings:controller="com.android.settings.security.screenlock.LockScreenPreferenceController"/>
 
-        <com.android.settingslib.RestrictedPreference
+        <!-- <com.android.settingslib.RestrictedPreference
             android:key="screen_timeout"
             android:title="@string/screen_timeout"
             android:summary="@string/summary_placeholder"
             android:fragment="com.android.settings.display.ScreenTimeoutSettings"
-            settings:controller="com.android.settings.display.ScreenTimeoutPreferenceController"/>
+            settings:controller="com.android.settings.display.ScreenTimeoutPreferenceController"/> -->
     </PreferenceCategory>
 
     <PreferenceCategory
-- 
2.25.1

